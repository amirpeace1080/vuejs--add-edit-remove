<!doctype html>
<html lang="fa" dir="rtl">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.rtl.min.css"
        integrity="sha384-+qdLaIRZfNu4cVPK/PxJJEy0B0f3Ugv8i482AKY7gwXwhaCroABd086ybrVKTa0q" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">

    <title>add edit remove</title>
</head>

<body>
    <div class="container mt-5" id="app">
        <div>
            <div class="mb-3">
                <label for="exampleInputEmail1" class="form-label">افزودن آیتم جدید</label>
                <input v-model="newTodo" @keyup.enter="addTodo" type="text" class="form-control" id="exampleInputEmail1">
            </div>
        </div>
        <br>
        <table class="table table-hover table-striped">
            <thead>
                <tr>
                    <th scope="col">ردیف</th>
                    <th scope="col">Todo</th>
                    <th scope="col">عملیات</th>
                </tr>
            </thead>
            <tbody>
                <tr v-for="(item, index) in todos" :key="index">
                    <td> {{index+1}} </td>
                    <td>
                        <p v-if="!item.editVal"> {{item.text}} </p>
                        <p v-else>
                            <input @keyup.enter="editTextValue(index)" v-model="editText = item.text" type="text" class="form-control">
                        </p>
                    </td>
                    <td>
                        <button @click="delTodo(index)" class="btn btn-danger"><i class="bi bi-trash"></i></button>
                        <button @click="editTodo(index)" class="btn btn-success"><i class="bi bi-pencil-square"></i></button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <script src="./vue.js"></script>
    <script>
        const app = new Vue({
            el: '#app',
            data: {
                todos: [
                    { text: 'vuejs', editVal: true },
                    { text: 'reactjs', editVal: false },
                    { text: 'angularjs', editVal: false }
                ],
                newTodo: '',
                editText: ''
            },
            methods: {
                addTodo() {
                    this.todos.push({text: this.newTodo})
                    this.newTodo= ''
                },
                delTodo(index) {
                    this.todos.splice(index, 1)
                },
                editTodo(index) {
                    this.todos[index].editVal =! this.todos[index].editVal
                },
                editTextValue(index) {
                    this.todos[index].text = this.editText
                    this.todos[index].editVal =! this.todos[index].editVal
                }
            }
        })
    </script>
</body>

</html>